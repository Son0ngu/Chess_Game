{"ast":null,"code":"var _jsxFileName = \"/home/sonbx/Documents/Project/Chess_Game/chess_frontend/src/BoardSquare.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport Square from './Square';\nimport Piece from './Piece';\nimport { useDrop } from 'react-dnd';\nimport { handleMove, gameSubject } from './Game';\nimport Promote from './Promote';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function BoardSquare({\n  piece,\n  black,\n  position\n}) {\n  _s();\n  const [promotion, setPromotion] = useState(null);\n  const [, drop] = useDrop({\n    accept: 'piece',\n    drop: item => {\n      const [fromPosition] = item.id.split('_');\n      console.log(`Dropped piece from ${fromPosition} to ${position}`);\n      handleMove(fromPosition, position);\n    }\n  });\n  useEffect(() => {\n    const subscription = gameSubject.subscribe(({\n      pendingPromotion\n    }) => pendingPromotion && pendingPromotion.to === position ? setPromotion(pendingPromotion) : setPromotion(null));\n    return () => subscription.unsubscribe();\n  }, [position]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"board-square\",\n    ref: drop,\n    children: /*#__PURE__*/_jsxDEV(Square, {\n      black: black,\n      children: promotion ? /*#__PURE__*/_jsxDEV(Promote, {\n        promotion: promotion\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 11\n      }, this) : piece ? /*#__PURE__*/_jsxDEV(Piece, {\n        piece: piece,\n        position: position\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 11\n      }, this) : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 5\n  }, this);\n}\n_s(BoardSquare, \"n4a8j/8FwGI/tWPbvdxFfKk+6PA=\", false, function () {\n  return [useDrop];\n});\n_c = BoardSquare;\nvar _c;\n$RefreshReg$(_c, \"BoardSquare\");","map":{"version":3,"names":["React","useEffect","useState","Square","Piece","useDrop","handleMove","gameSubject","Promote","jsxDEV","_jsxDEV","BoardSquare","piece","black","position","_s","promotion","setPromotion","drop","accept","item","fromPosition","id","split","console","log","subscription","subscribe","pendingPromotion","to","unsubscribe","className","ref","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/sonbx/Documents/Project/Chess_Game/chess_frontend/src/BoardSquare.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Square from './Square';\nimport Piece from './Piece';\nimport { useDrop } from 'react-dnd';\nimport { handleMove, gameSubject } from './Game';\nimport Promote from './Promote';\n\nexport default function BoardSquare({ piece, black, position }) {\n  const [promotion, setPromotion] = useState(null);\n\n  const [, drop] = useDrop({\n    accept: 'piece',\n    drop: (item) => {\n      const [fromPosition] = item.id.split('_');\n      console.log(`Dropped piece from ${fromPosition} to ${position}`);\n      handleMove(fromPosition, position);\n    },\n  });\n\n  useEffect(() => {\n    const subscription = gameSubject.subscribe(({ pendingPromotion }) =>\n      pendingPromotion && pendingPromotion.to === position\n        ? setPromotion(pendingPromotion)\n        : setPromotion(null)\n    );\n    return () => subscription.unsubscribe();\n  }, [position]);\n\n  return (\n    <div className=\"board-square\" ref={drop}>\n      <Square black={black}>\n        {promotion ? (\n          <Promote promotion={promotion} />\n        ) : piece ? (\n          <Piece piece={piece} position={position} />\n        ) : null}\n      </Square>\n    </div>\n  );\n}"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,OAAOC,MAAM,MAAM,UAAU;AAC7B,OAAOC,KAAK,MAAM,SAAS;AAC3B,SAASC,OAAO,QAAQ,WAAW;AACnC,SAASC,UAAU,EAAEC,WAAW,QAAQ,QAAQ;AAChD,OAAOC,OAAO,MAAM,WAAW;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhC,eAAe,SAASC,WAAWA,CAAC;EAAEC,KAAK;EAAEC,KAAK;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EAC9D,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EAEhD,MAAM,GAAGgB,IAAI,CAAC,GAAGb,OAAO,CAAC;IACvBc,MAAM,EAAE,OAAO;IACfD,IAAI,EAAGE,IAAI,IAAK;MACd,MAAM,CAACC,YAAY,CAAC,GAAGD,IAAI,CAACE,EAAE,CAACC,KAAK,CAAC,GAAG,CAAC;MACzCC,OAAO,CAACC,GAAG,CAAC,sBAAsBJ,YAAY,OAAOP,QAAQ,EAAE,CAAC;MAChER,UAAU,CAACe,YAAY,EAAEP,QAAQ,CAAC;IACpC;EACF,CAAC,CAAC;EAEFb,SAAS,CAAC,MAAM;IACd,MAAMyB,YAAY,GAAGnB,WAAW,CAACoB,SAAS,CAAC,CAAC;MAAEC;IAAiB,CAAC,KAC9DA,gBAAgB,IAAIA,gBAAgB,CAACC,EAAE,KAAKf,QAAQ,GAChDG,YAAY,CAACW,gBAAgB,CAAC,GAC9BX,YAAY,CAAC,IAAI,CACvB,CAAC;IACD,OAAO,MAAMS,YAAY,CAACI,WAAW,CAAC,CAAC;EACzC,CAAC,EAAE,CAAChB,QAAQ,CAAC,CAAC;EAEd,oBACEJ,OAAA;IAAKqB,SAAS,EAAC,cAAc;IAACC,GAAG,EAAEd,IAAK;IAAAe,QAAA,eACtCvB,OAAA,CAACP,MAAM;MAACU,KAAK,EAAEA,KAAM;MAAAoB,QAAA,EAClBjB,SAAS,gBACRN,OAAA,CAACF,OAAO;QAACQ,SAAS,EAAEA;MAAU;QAAAkB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,GAC/BzB,KAAK,gBACPF,OAAA,CAACN,KAAK;QAACQ,KAAK,EAAEA,KAAM;QAACE,QAAQ,EAAEA;MAAS;QAAAoB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,GACzC;IAAI;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACF;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACN,CAAC;AAEV;AAACtB,EAAA,CAhCuBJ,WAAW;EAAA,QAGhBN,OAAO;AAAA;AAAAiC,EAAA,GAHF3B,WAAW;AAAA,IAAA2B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}