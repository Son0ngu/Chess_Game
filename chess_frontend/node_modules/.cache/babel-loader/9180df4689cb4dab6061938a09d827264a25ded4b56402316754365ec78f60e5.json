{"ast":null,"code":"import { io } from 'socket.io-client';\nimport { getToken } from '../utils/storage';\n\n// Base URL for socket connection\nconst SOCKET_URL = 'http://localhost:5000';\n\n// Create socket instance with authentication\nexport const socket = io(SOCKET_URL, {\n  autoConnect: false,\n  auth: {\n    token: getToken\n  }\n});\n\n// Connect socket with current token\nexport const connectSocket = () => {\n  if (getToken()) {\n    socket.auth = {\n      token: getToken()\n    };\n    socket.connect();\n  }\n};\n\n// Disconnect socket\nexport const disconnectSocket = () => {\n  socket.disconnect();\n};\n\n// Listen for connection/errors\nsocket.on('connect', () => {\n  console.log('Socket connected');\n  console.log(`/assets/${piece.type.toLowerCase()}_${piece.color === 'white' ? 'w' : 'b'}.png`);\n});\nsocket.on('connect_error', error => {\n  console.error('Socket connection error:', error.message);\n\n  // If authentication error, handle it\n  if (error.message === 'authentication_error') {\n    console.error('Authentication failed for socket connection');\n  }\n});\nexport default socket;","map":{"version":3,"names":["io","getToken","SOCKET_URL","socket","autoConnect","auth","token","connectSocket","connect","disconnectSocket","disconnect","on","console","log","piece","type","toLowerCase","color","error","message"],"sources":["/home/sonbx/Documents/Project/Chess_Game/chess_frontend/src/services/socket.js"],"sourcesContent":["import { io } from 'socket.io-client';\nimport { getToken } from '../utils/storage';\n\n// Base URL for socket connection\nconst SOCKET_URL = 'http://localhost:5000';\n\n// Create socket instance with authentication\nexport const socket = io(SOCKET_URL, {\n  autoConnect: false,\n  auth: {\n    token: getToken\n  }\n});\n\n// Connect socket with current token\nexport const connectSocket = () => {\n  if (getToken()) {\n    socket.auth = { token: getToken() };\n    socket.connect();\n  }\n};\n\n// Disconnect socket\nexport const disconnectSocket = () => {\n  socket.disconnect();\n};\n\n// Listen for connection/errors\nsocket.on('connect', () => {\n  console.log('Socket connected');\n  console.log(`/assets/${piece.type.toLowerCase()}_${piece.color === 'white' ? 'w' : 'b'}.png`);\n\n});\n\nsocket.on('connect_error', (error) => {\n  console.error('Socket connection error:', error.message);\n  \n  // If authentication error, handle it\n  if (error.message === 'authentication_error') {\n    console.error('Authentication failed for socket connection');\n  }\n});\n\nexport default socket;\n"],"mappings":"AAAA,SAASA,EAAE,QAAQ,kBAAkB;AACrC,SAASC,QAAQ,QAAQ,kBAAkB;;AAE3C;AACA,MAAMC,UAAU,GAAG,uBAAuB;;AAE1C;AACA,OAAO,MAAMC,MAAM,GAAGH,EAAE,CAACE,UAAU,EAAE;EACnCE,WAAW,EAAE,KAAK;EAClBC,IAAI,EAAE;IACJC,KAAK,EAAEL;EACT;AACF,CAAC,CAAC;;AAEF;AACA,OAAO,MAAMM,aAAa,GAAGA,CAAA,KAAM;EACjC,IAAIN,QAAQ,CAAC,CAAC,EAAE;IACdE,MAAM,CAACE,IAAI,GAAG;MAAEC,KAAK,EAAEL,QAAQ,CAAC;IAAE,CAAC;IACnCE,MAAM,CAACK,OAAO,CAAC,CAAC;EAClB;AACF,CAAC;;AAED;AACA,OAAO,MAAMC,gBAAgB,GAAGA,CAAA,KAAM;EACpCN,MAAM,CAACO,UAAU,CAAC,CAAC;AACrB,CAAC;;AAED;AACAP,MAAM,CAACQ,EAAE,CAAC,SAAS,EAAE,MAAM;EACzBC,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;EAC/BD,OAAO,CAACC,GAAG,CAAC,WAAWC,KAAK,CAACC,IAAI,CAACC,WAAW,CAAC,CAAC,IAAIF,KAAK,CAACG,KAAK,KAAK,OAAO,GAAG,GAAG,GAAG,GAAG,MAAM,CAAC;AAE/F,CAAC,CAAC;AAEFd,MAAM,CAACQ,EAAE,CAAC,eAAe,EAAGO,KAAK,IAAK;EACpCN,OAAO,CAACM,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAACC,OAAO,CAAC;;EAExD;EACA,IAAID,KAAK,CAACC,OAAO,KAAK,sBAAsB,EAAE;IAC5CP,OAAO,CAACM,KAAK,CAAC,6CAA6C,CAAC;EAC9D;AACF,CAAC,CAAC;AAEF,eAAef,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}