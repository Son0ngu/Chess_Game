{"ast":null,"code":"var _jsxFileName = \"D:\\\\Code\\\\Chess_Game\\\\chess_frontend\\\\src\\\\pages\\\\Play.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { useAuth } from \"../context/AuthContext\";\nimport Board from \"../components/Board\";\nimport MoveHistory from \"../components/MoveHistory\";\nimport GameControls from \"../components/GameControls\";\nimport Spinner from \"../components/Spinner\";\n// Remove SOCKET_EVENTS since it's not directly used\nimport { socket } from \"../services/socket\";\nimport useChess from \"../hooks/useChess\";\nimport \"../styles/Play.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Play = () => {\n  _s();\n  const {\n    gameId\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    user,\n    isAuthenticated\n  } = useAuth();\n  const [opponent, setOpponent] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [gameOver, setGameOver] = useState(false);\n  const [gameResult, setGameResult] = useState(null);\n  const [showResignDialog, setShowResignDialog] = useState(false);\n  const [showDrawOfferDialog, setShowDrawOfferDialog] = useState(false);\n  const [receivedDrawOffer, setReceivedDrawOffer] = useState(false);\n\n  // Debug state\n  const [showDebug, setShowDebug] = useState(process.env.NODE_ENV === 'development');\n  const [debugInfo, setDebugInfo] = useState({\n    gameId: gameId || 'Not set',\n    socketConnected: socket.connected,\n    loadAttempts: 0,\n    errors: []\n  });\n\n  // Get chess game state from custom hook - remove unused variables\n  const {\n    board,\n    currentTurn,\n    playerColor,\n    moves,\n    // Remove check from destructuring since it's not used\n    makeMove,\n    // Remove undo, redo, reset from destructuring since they're not used directly\n    position,\n    inCheck,\n    possibleMoves,\n    gameStatus\n  } = useChess(gameId);\n\n  // Add game:matched event handler\n  useEffect(() => {\n    const handleMatchFound = data => {\n      console.log(\"Match found!\", data);\n      if (!data) {\n        console.error(\"Empty match data received\");\n        return;\n      }\n      if (!data.gameId) {\n        console.error(\"Invalid match data - missing gameId:\", data);\n        return;\n      }\n\n      // Make sure gameId is a string and not \"undefined\"\n      if (typeof data.gameId !== 'string' || data.gameId === \"undefined\") {\n        console.error(`Invalid gameId format: ${data.gameId}`);\n        return;\n      }\n      console.log(`‚úì Valid gameId received: ${data.gameId}`);\n      navigate(`/play/${data.gameId}`);\n    };\n    socket.on(\"game:matched\", handleMatchFound);\n    return () => {\n      socket.off(\"game:matched\", handleMatchFound);\n    };\n  }, [navigate]);\n\n  // Debug: Check for undefined gameId in URL\n  useEffect(() => {\n    if (window.location.pathname.includes('/play/undefined')) {\n      console.error(\"‚ö†Ô∏è DETECTED 'undefined' IN URL PATH! This is the bug we're looking for.\");\n      setDebugInfo(prev => ({\n        ...prev,\n        errors: [...prev.errors, {\n          time: new Date().toLocaleTimeString(),\n          message: \"URL contains 'undefined' instead of a valid gameId\"\n        }]\n      }));\n\n      // Redirect to play page after short delay\n      setTimeout(() => navigate('/play'), 3000);\n    } else if (gameId) {\n      console.log(`üéÆ Game ID from URL params: ${gameId}`);\n      setDebugInfo(prev => ({\n        ...prev,\n        gameId: gameId\n      }));\n    }\n  }, [gameId, navigate]);\n\n  // Handle authentication redirect\n  useEffect(() => {\n    if (!isAuthenticated && !isLoading) {\n      navigate(\"/signin\");\n    }\n  }, [isAuthenticated, navigate, isLoading]);\n\n  // Debug: Track socket connection\n  useEffect(() => {\n    const handleConnect = () => {\n      console.log(\"üîå Socket connected\");\n      setDebugInfo(prev => ({\n        ...prev,\n        socketConnected: true\n      }));\n    };\n    const handleDisconnect = () => {\n      console.log(\"üîå Socket disconnected\");\n      setDebugInfo(prev => ({\n        ...prev,\n        socketConnected: false,\n        errors: [...prev.errors, {\n          time: new Date().toLocaleTimeString(),\n          message: \"Socket disconnected while on game page\"\n        }]\n      }));\n    };\n    socket.on('connect', handleConnect);\n    socket.on('disconnect', handleDisconnect);\n    return () => {\n      socket.off('connect', handleConnect);\n      socket.off('disconnect', handleDisconnect);\n    };\n  }, []);\n\n  // Initial game setup\n  useEffect(() => {\n    if (!gameId || !isAuthenticated) {\n      if (!gameId) {\n        console.log(\"No gameId provided, showing matchmaking\");\n      }\n      return;\n    }\n    setIsLoading(true);\n\n    // Debug: Log load attempt\n    setDebugInfo(prev => ({\n      ...prev,\n      loadAttempts: prev.loadAttempts + 1\n    }));\n    console.log(`üé≤ Joining game room for gameId: ${gameId}`);\n\n    // Join game room\n    socket.emit(\"game:join\", {\n      gameId\n    });\n\n    // Get game data\n    const handleGameData = data => {\n      console.log(`üìä Received game data for game ${gameId}:`, data);\n\n      // SAFETY CHECK: Ensure data is valid before processing\n      if (!data) {\n        console.error(\"Received empty game data\");\n        setDebugInfo(prev => ({\n          ...prev,\n          errors: [...prev.errors, {\n            time: new Date().toLocaleTimeString(),\n            message: \"Received empty game data from server\"\n          }]\n        }));\n        setIsLoading(false);\n        return;\n      }\n\n      // Get opponent information - add safety check here\n      const opponentPlayer = data.players && Array.isArray(data.players) ? data.players.find(player => player && player.id && player.id !== (user === null || user === void 0 ? void 0 : user.id)) : null;\n      if (opponentPlayer) {\n        setOpponent(opponentPlayer);\n        console.log(`üë§ Found opponent: ${opponentPlayer.username}`);\n      } else {\n        console.warn(\"‚ö†Ô∏è Could not find opponent in game data\");\n        setDebugInfo(prev => ({\n          ...prev,\n          errors: [...prev.errors, {\n            time: new Date().toLocaleTimeString(),\n            message: \"Could not find opponent in game data\"\n          }]\n        }));\n      }\n      setIsLoading(false);\n    };\n    const handleGameError = error => {\n      console.error(`‚ùå Game error:`, error);\n      setDebugInfo(prev => ({\n        ...prev,\n        errors: [...prev.errors, {\n          time: new Date().toLocaleTimeString(),\n          message: `Game error: ${error && (error.message || JSON.stringify(error))}`\n        }]\n      }));\n      setIsLoading(false);\n    };\n    socket.on(\"game:data\", handleGameData);\n    socket.on(\"game:error\", handleGameError);\n\n    // Listen for game over events\n    socket.on(\"game:over\", data => {\n      console.log(`üèÅ Game over:`, data);\n      setGameOver(true);\n      setGameResult(data && data.result ? data.result : null);\n    });\n\n    // Listen for draw offers\n    socket.on(\"game:drawOffered\", data => {\n      if (data && data.from) {\n        console.log(`ü§ù Draw offered by ${data.from}`);\n      } else {\n        console.log(`ü§ù Draw offered`);\n      }\n      setReceivedDrawOffer(true);\n    });\n    return () => {\n      // Clean up socket listeners when component unmounts\n      console.log(`üßπ Cleaning up socket listeners and leaving game ${gameId}`);\n      socket.off(\"game:data\", handleGameData);\n      socket.off(\"game:error\", handleGameError);\n      socket.off(\"game:over\");\n      socket.off(\"game:drawOffered\");\n      socket.emit(\"game:leave\", {\n        gameId\n      });\n    };\n  }, [gameId, isAuthenticated, user]);\n\n  // Check for game status changes\n  useEffect(() => {\n    if (gameStatus) {\n      if (gameStatus.isGameOver) {\n        console.log(`‚ôüÔ∏è Game status change to game over:`, gameStatus);\n        setGameOver(true);\n        setGameResult(gameStatus.result);\n      }\n    }\n  }, [gameStatus]);\n  const handleResign = () => {\n    console.log(`üè≥Ô∏è Resigning game ${gameId}`);\n    socket.emit(\"game:resign\", {\n      gameId\n    });\n    setGameOver(true);\n    setGameResult({\n      type: \"resignation\",\n      winner: opponent === null || opponent === void 0 ? void 0 : opponent.id\n    });\n    setShowResignDialog(false);\n  };\n  const handleOfferDraw = () => {\n    console.log(`ü§ù Offering draw in game ${gameId}`);\n    socket.emit(\"game:offerDraw\", {\n      gameId\n    });\n    setShowDrawOfferDialog(false);\n  };\n  const handleAcceptDraw = () => {\n    console.log(`ü§ù Accepting draw in game ${gameId}`);\n    socket.emit(\"game:acceptDraw\", {\n      gameId\n    });\n    setGameOver(true);\n    setGameResult({\n      type: \"draw\",\n      reason: \"agreement\"\n    });\n    setReceivedDrawOffer(false);\n  };\n  const handleDeclineDraw = () => {\n    console.log(`üëé Declining draw in game ${gameId}`);\n    socket.emit(\"game:declineDraw\", {\n      gameId\n    });\n    setReceivedDrawOffer(false);\n  };\n  const setUndo = () => {\n    console.log(`‚è™ Requesting undo in game ${gameId}`);\n    socket.emit(\"game:requestUndo\", {\n      gameId\n    });\n  };\n  const setRedo = () => {\n    console.log(`‚è© Requesting redo in game ${gameId}`);\n    socket.emit(\"game:requestRedo\", {\n      gameId\n    });\n  };\n\n  // If no gameId is present, we need to show matchmaking UI instead\n  if (!gameId) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"matchmaking-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Find a Match\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"matchmaking-options\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            console.log(\"Looking for casual match\");\n            socket.emit(\"game:findMatch\", {\n              gameMode: \"casual\",\n              timeControl: \"10min\"\n            });\n          },\n          children: \"Find Casual Match\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            console.log(\"Looking for ranked match\");\n            socket.emit(\"game:findMatch\", {\n              gameMode: \"ranked\",\n              timeControl: \"10min\"\n            });\n          },\n          children: \"Find Ranked Match\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 9\n      }, this), showDebug && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"debug-box\",\n        style: {\n          marginTop: '20px',\n          padding: '10px',\n          border: '1px solid #666',\n          backgroundColor: '#222',\n          color: '#eee',\n          fontSize: '12px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Debug: Listening for match\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Socket connected: \", /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              color: socket.connected ? '#4CAF50' : '#F44336'\n            },\n            children: socket.connected ? 'Yes' : 'No'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 34\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 7\n    }, this);\n  }\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 9\n      }, this), showDebug && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'fixed',\n          bottom: '10px',\n          right: '10px',\n          background: '#222',\n          color: '#fff',\n          padding: '10px',\n          maxWidth: '300px',\n          fontSize: '11px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Loading game: \", gameId]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Attempt #\", debugInfo.loadAttempts]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Socket connected: \", debugInfo.socketConnected ? 'Yes' : 'No']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true);\n  }\n\n  // Safe check for user object to prevent the substring error\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Error: User data not available\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Please try refreshing the page or logging in again.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/lobby'),\n        children: \"Return to Lobby\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"play-container\",\n    children: [showDebug && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        top: '10px',\n        right: '10px',\n        backgroundColor: 'rgba(0,0,0,0.8)',\n        color: 'white',\n        padding: '10px',\n        zIndex: 1000,\n        fontSize: '11px',\n        maxWidth: '300px',\n        maxHeight: '300px',\n        overflow: 'auto'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setShowDebug(false),\n        style: {\n          float: 'right',\n          marginLeft: '5px'\n        },\n        children: \"X\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Game Debug\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Game ID: \", /*#__PURE__*/_jsxDEV(\"code\", {\n          children: debugInfo.gameId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 23\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Socket: \", /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            color: debugInfo.socketConnected ? 'lime' : 'red'\n          },\n          children: debugInfo.socketConnected ? 'Connected' : 'Disconnected'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 22\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Player: \", (user === null || user === void 0 ? void 0 : user.username) || 'Unknown']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Opponent: \", (opponent === null || opponent === void 0 ? void 0 : opponent.username) || 'Unknown']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Color: \", playerColor || 'Unknown']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Turn: \", currentTurn || 'Unknown']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 11\n      }, this), debugInfo.errors.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          children: \"Errors:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          style: {\n            paddingLeft: '15px',\n            margin: '5px 0'\n          },\n          children: debugInfo.errors.map((err, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [\"[\", err.time, \"] \", err.message]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-info\",\n      children: [opponent && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"opponent-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: opponent.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rating\",\n          children: [\"Rating: \", opponent.elo]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"game-status\",\n        children: gameOver ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"game-result\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Game Over\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 15\n          }, this), (gameResult === null || gameResult === void 0 ? void 0 : gameResult.type) === \"checkmate\" && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Checkmate! \", gameResult.winner === user.id ? \"You won\" : \"You lost\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 17\n          }, this), (gameResult === null || gameResult === void 0 ? void 0 : gameResult.type) === \"draw\" && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Game drawn by \", gameResult.reason || 'agreement']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 434,\n            columnNumber: 17\n          }, this), (gameResult === null || gameResult === void 0 ? void 0 : gameResult.type) === \"resignation\" && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: gameResult.winner === user.id ? \"Opponent resigned. You won!\" : \"You resigned. You lost.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 17\n          }, this), (gameResult === null || gameResult === void 0 ? void 0 : gameResult.type) === \"timeout\" && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: gameResult.winner === user.id ? \"Opponent ran out of time. You won!\" : \"You ran out of time. You lost.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 444,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"new-game-btn\",\n            onClick: () => navigate(\"/lobby\"),\n            children: \"Back to Lobby\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 450,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"current-turn\",\n            children: currentTurn === playerColor ? \"Your turn\" : \"Opponent's turn\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 15\n          }, this), inCheck && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"check-alert\",\n            children: \"Check!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 462,\n            columnNumber: 27\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-board-container\",\n      children: /*#__PURE__*/_jsxDEV(Board, {\n        board: board || [],\n        position: position || {},\n        playerColor: playerColor || 'white',\n        possibleMoves: possibleMoves || {},\n        onMove: makeMove,\n        disabled: gameOver || currentTurn !== playerColor\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 469,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 468,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-sidebar\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"move-history-container\",\n        children: /*#__PURE__*/_jsxDEV(MoveHistory, {\n          moves: moves || []\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 480,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"game-controls-container\",\n        children: /*#__PURE__*/_jsxDEV(GameControls, {\n          onNewGame: () => navigate(\"/lobby\"),\n          canResign: !gameOver,\n          onResign: () => setShowResignDialog(true),\n          canOfferDraw: !gameOver,\n          onOfferDraw: () => setShowDrawOfferDialog(true),\n          canUndo: moves && moves.length > 0 && !gameOver,\n          onUndoRequest: () => setUndo(true),\n          canRedo: true,\n          onRedoRequest: () => setRedo(true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"player-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"You (\", playerColor || 'unknown', \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rating\",\n          children: [\"Rating: \", user.elo || '?']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 501,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 499,\n        columnNumber: 9\n      }, this), process.env.NODE_ENV === 'development' && !showDebug && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setShowDebug(true),\n        style: {\n          position: 'fixed',\n          bottom: '10px',\n          right: '10px',\n          background: '#444',\n          color: '#fff',\n          border: 'none',\n          padding: '5px 10px',\n          borderRadius: '4px',\n          cursor: 'pointer',\n          fontSize: '12px'\n        },\n        children: \"Show Debug\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 506,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 479,\n      columnNumber: 7\n    }, this), showResignDialog && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dialog-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dialog\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Resign Game?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 530,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Are you sure you want to resign? This will count as a loss.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 531,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dialog-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleResign,\n            className: \"confirm-btn\",\n            children: \"Yes, Resign\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 533,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowResignDialog(false),\n            className: \"cancel-btn\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 536,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 532,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 529,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 528,\n      columnNumber: 9\n    }, this), showDrawOfferDialog && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dialog-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dialog\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Offer Draw?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 548,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Send a draw offer to your opponent?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 549,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dialog-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleOfferDraw,\n            className: \"confirm-btn\",\n            children: \"Yes, Offer Draw\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 551,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowDrawOfferDialog(false),\n            className: \"cancel-btn\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 554,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 550,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 547,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 546,\n      columnNumber: 9\n    }, this), receivedDrawOffer && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dialog-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dialog\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Draw Offered\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 566,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Your opponent has offered a draw. Do you accept?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dialog-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleAcceptDraw,\n            className: \"confirm-btn\",\n            children: \"Accept Draw\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 569,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleDeclineDraw,\n            className: \"cancel-btn\",\n            children: \"Decline\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 572,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 568,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 565,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 564,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 369,\n    columnNumber: 5\n  }, this);\n};\n_s(Play, \"JcAPiUmYGW+8SvKgvJEhR214m40=\", false, function () {\n  return [useParams, useNavigate, useAuth, useChess];\n});\n_c = Play;\nexport default Play;\nvar _c;\n$RefreshReg$(_c, \"Play\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","useAuth","Board","MoveHistory","GameControls","Spinner","socket","useChess","jsxDEV","_jsxDEV","Fragment","_Fragment","Play","_s","gameId","navigate","user","isAuthenticated","opponent","setOpponent","isLoading","setIsLoading","gameOver","setGameOver","gameResult","setGameResult","showResignDialog","setShowResignDialog","showDrawOfferDialog","setShowDrawOfferDialog","receivedDrawOffer","setReceivedDrawOffer","showDebug","setShowDebug","process","env","NODE_ENV","debugInfo","setDebugInfo","socketConnected","connected","loadAttempts","errors","board","currentTurn","playerColor","moves","makeMove","position","inCheck","possibleMoves","gameStatus","handleMatchFound","data","console","log","error","on","off","window","location","pathname","includes","prev","time","Date","toLocaleTimeString","message","setTimeout","handleConnect","handleDisconnect","emit","handleGameData","opponentPlayer","players","Array","isArray","find","player","id","username","warn","handleGameError","JSON","stringify","result","from","isGameOver","handleResign","type","winner","handleOfferDraw","handleAcceptDraw","reason","handleDeclineDraw","setUndo","setRedo","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","gameMode","timeControl","style","marginTop","padding","border","backgroundColor","color","fontSize","bottom","right","background","maxWidth","top","zIndex","maxHeight","overflow","float","marginLeft","length","paddingLeft","margin","map","err","i","elo","onMove","disabled","onNewGame","canResign","onResign","canOfferDraw","onOfferDraw","canUndo","onUndoRequest","canRedo","onRedoRequest","borderRadius","cursor","_c","$RefreshReg$"],"sources":["D:/Code/Chess_Game/chess_frontend/src/pages/Play.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { useAuth } from \"../context/AuthContext\";\r\nimport Board from \"../components/Board\";\r\nimport MoveHistory from \"../components/MoveHistory\";\r\nimport GameControls from \"../components/GameControls\";\r\nimport Spinner from \"../components/Spinner\";\r\n// Remove SOCKET_EVENTS since it's not directly used\r\nimport { socket } from \"../services/socket\";\r\nimport useChess from \"../hooks/useChess\";\r\nimport \"../styles/Play.css\";\r\n\r\nconst Play = () => {\r\n  const { gameId } = useParams();\r\n  const navigate = useNavigate();\r\n  const { user, isAuthenticated } = useAuth();\r\n  const [opponent, setOpponent] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [gameOver, setGameOver] = useState(false);\r\n  const [gameResult, setGameResult] = useState(null);\r\n  const [showResignDialog, setShowResignDialog] = useState(false);\r\n  const [showDrawOfferDialog, setShowDrawOfferDialog] = useState(false);\r\n  const [receivedDrawOffer, setReceivedDrawOffer] = useState(false);\r\n  \r\n  // Debug state\r\n  const [showDebug, setShowDebug] = useState(process.env.NODE_ENV === 'development');\r\n  const [debugInfo, setDebugInfo] = useState({\r\n    gameId: gameId || 'Not set',\r\n    socketConnected: socket.connected,\r\n    loadAttempts: 0,\r\n    errors: []\r\n  });\r\n\r\n  // Get chess game state from custom hook - remove unused variables\r\n  const {\r\n    board,\r\n    currentTurn,\r\n    playerColor,\r\n    moves,\r\n    // Remove check from destructuring since it's not used\r\n    makeMove,\r\n    // Remove undo, redo, reset from destructuring since they're not used directly\r\n    position,\r\n    inCheck,\r\n    possibleMoves,\r\n    gameStatus\r\n  } = useChess(gameId);\r\n  \r\n  // Add game:matched event handler\r\n  useEffect(() => {\r\n    const handleMatchFound = (data) => {\r\n      console.log(\"Match found!\", data);\r\n      \r\n      if (!data) {\r\n        console.error(\"Empty match data received\");\r\n        return;\r\n      }\r\n      \r\n      if (!data.gameId) {\r\n        console.error(\"Invalid match data - missing gameId:\", data);\r\n        return;\r\n      }\r\n      \r\n      // Make sure gameId is a string and not \"undefined\"\r\n      if (typeof data.gameId !== 'string' || data.gameId === \"undefined\") {\r\n        console.error(`Invalid gameId format: ${data.gameId}`);\r\n        return;\r\n      }\r\n      \r\n      console.log(`‚úì Valid gameId received: ${data.gameId}`);\r\n      navigate(`/play/${data.gameId}`);\r\n    };\r\n    \r\n    socket.on(\"game:matched\", handleMatchFound);\r\n    \r\n    return () => {\r\n      socket.off(\"game:matched\", handleMatchFound);\r\n    };\r\n  }, [navigate]);\r\n  \r\n  // Debug: Check for undefined gameId in URL\r\n  useEffect(() => {\r\n    if (window.location.pathname.includes('/play/undefined')) {\r\n      console.error(\"‚ö†Ô∏è DETECTED 'undefined' IN URL PATH! This is the bug we're looking for.\");\r\n      setDebugInfo(prev => ({\r\n        ...prev,\r\n        errors: [...prev.errors, {\r\n          time: new Date().toLocaleTimeString(),\r\n          message: \"URL contains 'undefined' instead of a valid gameId\"\r\n        }]\r\n      }));\r\n      \r\n      // Redirect to play page after short delay\r\n      setTimeout(() => navigate('/play'), 3000);\r\n    } else if (gameId) {\r\n      console.log(`üéÆ Game ID from URL params: ${gameId}`);\r\n      setDebugInfo(prev => ({\r\n        ...prev,\r\n        gameId: gameId\r\n      }));\r\n    }\r\n  }, [gameId, navigate]);\r\n  \r\n  // Handle authentication redirect\r\n  useEffect(() => {\r\n    if (!isAuthenticated && !isLoading) {\r\n      navigate(\"/signin\");\r\n    }\r\n  }, [isAuthenticated, navigate, isLoading]);\r\n\r\n  // Debug: Track socket connection\r\n  useEffect(() => {\r\n    const handleConnect = () => {\r\n      console.log(\"üîå Socket connected\");\r\n      setDebugInfo(prev => ({\r\n        ...prev,\r\n        socketConnected: true\r\n      }));\r\n    };\r\n    \r\n    const handleDisconnect = () => {\r\n      console.log(\"üîå Socket disconnected\");\r\n      setDebugInfo(prev => ({\r\n        ...prev,\r\n        socketConnected: false,\r\n        errors: [...prev.errors, {\r\n          time: new Date().toLocaleTimeString(),\r\n          message: \"Socket disconnected while on game page\"\r\n        }]\r\n      }));\r\n    };\r\n    \r\n    socket.on('connect', handleConnect);\r\n    socket.on('disconnect', handleDisconnect);\r\n    \r\n    return () => {\r\n      socket.off('connect', handleConnect);\r\n      socket.off('disconnect', handleDisconnect);\r\n    };\r\n  }, []);\r\n\r\n  // Initial game setup\r\n  useEffect(() => {\r\n    if (!gameId || !isAuthenticated) {\r\n      if (!gameId) {\r\n        console.log(\"No gameId provided, showing matchmaking\");\r\n      }\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    \r\n    // Debug: Log load attempt\r\n    setDebugInfo(prev => ({\r\n      ...prev,\r\n      loadAttempts: prev.loadAttempts + 1\r\n    }));\r\n    \r\n    console.log(`üé≤ Joining game room for gameId: ${gameId}`);\r\n\r\n    // Join game room\r\n    socket.emit(\"game:join\", { gameId });\r\n\r\n    // Get game data\r\n    const handleGameData = (data) => {\r\n      console.log(`üìä Received game data for game ${gameId}:`, data);\r\n      \r\n      // SAFETY CHECK: Ensure data is valid before processing\r\n      if (!data) {\r\n        console.error(\"Received empty game data\");\r\n        setDebugInfo(prev => ({\r\n          ...prev,\r\n          errors: [...prev.errors, {\r\n            time: new Date().toLocaleTimeString(),\r\n            message: \"Received empty game data from server\"\r\n          }]\r\n        }));\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n      \r\n      // Get opponent information - add safety check here\r\n      const opponentPlayer = data.players && Array.isArray(data.players) \r\n        ? data.players.find(player => player && player.id && player.id !== user?.id)\r\n        : null;\r\n      \r\n      if (opponentPlayer) {\r\n        setOpponent(opponentPlayer);\r\n        console.log(`üë§ Found opponent: ${opponentPlayer.username}`);\r\n      } else {\r\n        console.warn(\"‚ö†Ô∏è Could not find opponent in game data\");\r\n        setDebugInfo(prev => ({\r\n          ...prev,\r\n          errors: [...prev.errors, {\r\n            time: new Date().toLocaleTimeString(),\r\n            message: \"Could not find opponent in game data\"\r\n          }]\r\n        }));\r\n      }\r\n      \r\n      setIsLoading(false);\r\n    };\r\n    \r\n    const handleGameError = (error) => {\r\n      console.error(`‚ùå Game error:`, error);\r\n      setDebugInfo(prev => ({\r\n        ...prev,\r\n        errors: [...prev.errors, {\r\n          time: new Date().toLocaleTimeString(),\r\n          message: `Game error: ${error && (error.message || JSON.stringify(error))}`\r\n        }]\r\n      }));\r\n      setIsLoading(false);\r\n    };\r\n    \r\n    socket.on(\"game:data\", handleGameData);\r\n    socket.on(\"game:error\", handleGameError);\r\n\r\n    // Listen for game over events\r\n    socket.on(\"game:over\", (data) => {\r\n      console.log(`üèÅ Game over:`, data);\r\n      setGameOver(true);\r\n      setGameResult(data && data.result ? data.result : null);\r\n    });\r\n\r\n    // Listen for draw offers\r\n    socket.on(\"game:drawOffered\", (data) => {\r\n      if (data && data.from) {\r\n        console.log(`ü§ù Draw offered by ${data.from}`);\r\n      } else {\r\n        console.log(`ü§ù Draw offered`);\r\n      }\r\n      setReceivedDrawOffer(true);\r\n    });\r\n\r\n    return () => {\r\n      // Clean up socket listeners when component unmounts\r\n      console.log(`üßπ Cleaning up socket listeners and leaving game ${gameId}`);\r\n      socket.off(\"game:data\", handleGameData);\r\n      socket.off(\"game:error\", handleGameError);\r\n      socket.off(\"game:over\");\r\n      socket.off(\"game:drawOffered\");\r\n      socket.emit(\"game:leave\", { gameId });\r\n    };\r\n  }, [gameId, isAuthenticated, user]);\r\n\r\n  // Check for game status changes\r\n  useEffect(() => {\r\n    if (gameStatus) {\r\n      if (gameStatus.isGameOver) {\r\n        console.log(`‚ôüÔ∏è Game status change to game over:`, gameStatus);\r\n        setGameOver(true);\r\n        setGameResult(gameStatus.result);\r\n      }\r\n    }\r\n  }, [gameStatus]);\r\n\r\n  \r\n  const handleResign = () => {\r\n    console.log(`üè≥Ô∏è Resigning game ${gameId}`);\r\n    socket.emit(\"game:resign\", { gameId });\r\n    setGameOver(true);\r\n    setGameResult({ \r\n      type: \"resignation\", \r\n      winner: opponent?.id \r\n    });\r\n    setShowResignDialog(false);\r\n  };\r\n\r\n  const handleOfferDraw = () => {\r\n    console.log(`ü§ù Offering draw in game ${gameId}`);\r\n    socket.emit(\"game:offerDraw\", { gameId });\r\n    setShowDrawOfferDialog(false);\r\n  };\r\n\r\n  const handleAcceptDraw = () => {\r\n    console.log(`ü§ù Accepting draw in game ${gameId}`);\r\n    socket.emit(\"game:acceptDraw\", { gameId });\r\n    setGameOver(true);\r\n    setGameResult({ type: \"draw\", reason: \"agreement\" });\r\n    setReceivedDrawOffer(false);\r\n  };\r\n\r\n  const handleDeclineDraw = () => {\r\n    console.log(`üëé Declining draw in game ${gameId}`);\r\n    socket.emit(\"game:declineDraw\", { gameId });\r\n    setReceivedDrawOffer(false);\r\n  };\r\n\r\n  const setUndo = () => {\r\n    console.log(`‚è™ Requesting undo in game ${gameId}`);\r\n    socket.emit(\"game:requestUndo\", { gameId });\r\n  };\r\n\r\n  const setRedo = () => {\r\n    console.log(`‚è© Requesting redo in game ${gameId}`);\r\n    socket.emit(\"game:requestRedo\", { gameId });  \r\n  };\r\n\r\n  // If no gameId is present, we need to show matchmaking UI instead\r\n  if (!gameId) {\r\n    return (\r\n      <div className=\"matchmaking-container\">\r\n        <h2>Find a Match</h2>\r\n        \r\n        <div className=\"matchmaking-options\">\r\n          <button onClick={() => {\r\n            console.log(\"Looking for casual match\");\r\n            socket.emit(\"game:findMatch\", { gameMode: \"casual\", timeControl: \"10min\" });\r\n          }}>\r\n            Find Casual Match\r\n          </button>\r\n          \r\n          <button onClick={() => {\r\n            console.log(\"Looking for ranked match\");\r\n            socket.emit(\"game:findMatch\", { gameMode: \"ranked\", timeControl: \"10min\" });\r\n          }}>\r\n            Find Ranked Match\r\n          </button>\r\n        </div>\r\n        \r\n        {/* Debug listener for game:matched */}\r\n        {showDebug && (\r\n          <div className=\"debug-box\" style={{\r\n            marginTop: '20px',\r\n            padding: '10px',\r\n            border: '1px solid #666',\r\n            backgroundColor: '#222',\r\n            color: '#eee',\r\n            fontSize: '12px'\r\n          }}>\r\n            <h4>Debug: Listening for match</h4>\r\n            <p>Socket connected: <span style={{ color: socket.connected ? '#4CAF50' : '#F44336' }}>\r\n              {socket.connected ? 'Yes' : 'No'}\r\n            </span></p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <>\r\n        <Spinner />\r\n        {showDebug && (\r\n          <div style={{ position: 'fixed', bottom: '10px', right: '10px', background: '#222', color: '#fff', padding: '10px', maxWidth: '300px', fontSize: '11px' }}>\r\n            <p>Loading game: {gameId}</p>\r\n            <p>Attempt #{debugInfo.loadAttempts}</p>\r\n            <p>Socket connected: {debugInfo.socketConnected ? 'Yes' : 'No'}</p>\r\n          </div>\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n\r\n  // Safe check for user object to prevent the substring error\r\n  if (!user) {\r\n    return (\r\n      <div className=\"error-container\">\r\n        <h2>Error: User data not available</h2>\r\n        <p>Please try refreshing the page or logging in again.</p>\r\n        <button onClick={() => navigate('/lobby')}>Return to Lobby</button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"play-container\">\r\n      {/* Debug panel */}\r\n      {showDebug && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: '10px',\r\n          right: '10px',\r\n          backgroundColor: 'rgba(0,0,0,0.8)',\r\n          color: 'white',\r\n          padding: '10px',\r\n          zIndex: 1000,\r\n          fontSize: '11px',\r\n          maxWidth: '300px',\r\n          maxHeight: '300px',\r\n          overflow: 'auto'\r\n        }}>\r\n          <button \r\n            onClick={() => setShowDebug(false)} \r\n            style={{float: 'right', marginLeft: '5px'}}\r\n          >\r\n            X\r\n          </button>\r\n          <h4>Game Debug</h4>\r\n          <p>Game ID: <code>{debugInfo.gameId}</code></p>\r\n          <p>Socket: <span style={{color: debugInfo.socketConnected ? 'lime' : 'red'}}>\r\n            {debugInfo.socketConnected ? 'Connected' : 'Disconnected'}\r\n          </span></p>\r\n          <p>Player: {user?.username || 'Unknown'}</p>\r\n          <p>Opponent: {opponent?.username || 'Unknown'}</p>\r\n          <p>Color: {playerColor || 'Unknown'}</p>\r\n          <p>Turn: {currentTurn || 'Unknown'}</p>\r\n          \r\n          {debugInfo.errors.length > 0 && (\r\n            <div>\r\n              <h5>Errors:</h5>\r\n              <ul style={{paddingLeft: '15px', margin: '5px 0'}}>\r\n                {debugInfo.errors.map((err, i) => (\r\n                  <li key={i}>[{err.time}] {err.message}</li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"game-info\">\r\n        {opponent && (\r\n          <div className=\"opponent-info\">\r\n            <h3>{opponent.username}</h3>\r\n            <div className=\"rating\">Rating: {opponent.elo}</div>\r\n          </div>\r\n        )}\r\n        \r\n        <div className=\"game-status\">\r\n          {gameOver ? (\r\n            <div className=\"game-result\">\r\n              <h2>Game Over</h2>\r\n              {gameResult?.type === \"checkmate\" && (\r\n                <p>\r\n                  Checkmate! {gameResult.winner === user.id\r\n                    ? \"You won\"\r\n                    : \"You lost\"}\r\n                </p>\r\n              )}\r\n              {gameResult?.type === \"draw\" && (\r\n                <p>Game drawn by {gameResult.reason || 'agreement'}</p>\r\n              )}\r\n              {gameResult?.type === \"resignation\" && (\r\n                <p>\r\n                  {gameResult.winner === user.id\r\n                    ? \"Opponent resigned. You won!\"\r\n                    : \"You resigned. You lost.\"}\r\n                </p>\r\n              )}\r\n              {gameResult?.type === \"timeout\" && (\r\n                <p>\r\n                  {gameResult.winner === user.id\r\n                    ? \"Opponent ran out of time. You won!\"\r\n                    : \"You ran out of time. You lost.\"}\r\n                </p>\r\n              )}\r\n              <button \r\n                className=\"new-game-btn\"\r\n                onClick={() => navigate(\"/lobby\")}\r\n              >\r\n                Back to Lobby\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            <div>\r\n              <div className=\"current-turn\">\r\n                {currentTurn === playerColor ? \"Your turn\" : \"Opponent's turn\"}\r\n              </div>\r\n              {inCheck && <div className=\"check-alert\">Check!</div>}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"game-board-container\">\r\n        <Board\r\n          board={board || []}\r\n          position={position || {}}\r\n          playerColor={playerColor || 'white'}\r\n          possibleMoves={possibleMoves || {}}\r\n          onMove={makeMove}\r\n          disabled={gameOver || currentTurn !== playerColor}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"game-sidebar\">\r\n        <div className=\"move-history-container\">\r\n          <MoveHistory moves={moves || []} />\r\n        </div>\r\n        \r\n        <div className=\"game-controls-container\">\r\n          <GameControls\r\n            onNewGame={() => navigate(\"/lobby\")}\r\n            canResign={!gameOver}\r\n            onResign={() => setShowResignDialog(true)}\r\n            canOfferDraw={!gameOver}\r\n            onOfferDraw={() => setShowDrawOfferDialog(true)}\r\n            canUndo={(moves && moves.length > 0) && !gameOver}\r\n            onUndoRequest={() => setUndo(true)}\r\n            canRedo={true}\r\n            onRedoRequest={() => setRedo(true)}\r\n          />\r\n        </div>\r\n\r\n        {/* Player info */}\r\n        <div className=\"player-info\">\r\n          <h3>You ({playerColor || 'unknown'})</h3>\r\n          <div className=\"rating\">Rating: {user.elo || '?'}</div>\r\n        </div>\r\n\r\n        {/* Debug button */}\r\n        {process.env.NODE_ENV === 'development' && !showDebug && (\r\n          <button \r\n            onClick={() => setShowDebug(true)}\r\n            style={{\r\n              position: 'fixed',\r\n              bottom: '10px',\r\n              right: '10px',\r\n              background: '#444',\r\n              color: '#fff',\r\n              border: 'none',\r\n              padding: '5px 10px',\r\n              borderRadius: '4px',\r\n              cursor: 'pointer',\r\n              fontSize: '12px'\r\n            }}\r\n          >\r\n            Show Debug\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Resign confirmation dialog */}\r\n      {showResignDialog && (\r\n        <div className=\"dialog-overlay\">\r\n          <div className=\"dialog\">\r\n            <h3>Resign Game?</h3>\r\n            <p>Are you sure you want to resign? This will count as a loss.</p>\r\n            <div className=\"dialog-buttons\">\r\n              <button onClick={handleResign} className=\"confirm-btn\">\r\n                Yes, Resign\r\n              </button>\r\n              <button onClick={() => setShowResignDialog(false)} className=\"cancel-btn\">\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Draw offer dialog */}\r\n      {showDrawOfferDialog && (\r\n        <div className=\"dialog-overlay\">\r\n          <div className=\"dialog\">\r\n            <h3>Offer Draw?</h3>\r\n            <p>Send a draw offer to your opponent?</p>\r\n            <div className=\"dialog-buttons\">\r\n              <button onClick={handleOfferDraw} className=\"confirm-btn\">\r\n                Yes, Offer Draw\r\n              </button>\r\n              <button onClick={() => setShowDrawOfferDialog(false)} className=\"cancel-btn\">\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Received draw offer dialog */}\r\n      {receivedDrawOffer && (\r\n        <div className=\"dialog-overlay\">\r\n          <div className=\"dialog\">\r\n            <h3>Draw Offered</h3>\r\n            <p>Your opponent has offered a draw. Do you accept?</p>\r\n            <div className=\"dialog-buttons\">\r\n              <button onClick={handleAcceptDraw} className=\"confirm-btn\">\r\n                Accept Draw\r\n              </button>\r\n              <button onClick={handleDeclineDraw} className=\"cancel-btn\">\r\n                Decline\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Play;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}